# ุฏููู ุงูุงุชุตุงู ุจุงูู API - VirClinc Patient App

## โ ุชู ุถุจุท ุงูุชุทุจูู ููุงุชุตุงู ุจุงูู API

ุชู ุฅุนุฏุงุฏ ุงูุชุทุจูู ุจุงููุงูู ููุงุชุตุงู ูุน ุงูู API ูู ุงูุชุณุฌูู ูุชุณุฌูู ุงูุฏุฎูู.

## ๐ง ุงูุฅุนุฏุงุฏุงุช ุงูุญุงููุฉ

### 1. ููู ุงูุฅุนุฏุงุฏุงุช (`lib/config/api_config.dart`)

ูุญุชูู ุนูู ุฌููุน ุฅุนุฏุงุฏุงุช ุงูุงุชุตุงู ุจุงูู API:

```dart
// Base URL ููู API
static const String _devBaseUrl = 'http://localhost:3000/v1';
static const String _prodBaseUrl = 'https://your-domain.com/v1';

// ุชุญุฏูุฏ ุงูุจูุฆุฉ
static const bool _isProduction = false;
```

### 2. ุงูุชุนุฏูู ุงูุชููุงุฆู ููู URL

ุงูุชุทุจูู ูููู ุชููุงุฆูุงู ุจู:
- **Android Emulator**: ุชุญููู `localhost` ุฅูู `10.0.2.2`
- **iOS Simulator**: ุงุณุชุฎุฏุงู `localhost` ูุจุงุดุฑุฉ
- **ุงูุฃุฌูุฒุฉ ุงููุนููุฉ**: ุชุญุชุงุฌ ุชุนุฏูู ูุฏูู (ุงูุธุฑ ุฃุฏูุงู)

## ๐ฑ ููููุฉ ุชุนุฏูู ุฅุนุฏุงุฏุงุช ุงูู API

### ููุชุทููุฑ ุงููุญูู (localhost)

ุงูุชุญ `lib/config/api_config.dart` ูุชุฃูุฏ ูู:

```dart
static const String _devBaseUrl = 'http://localhost:3000/v1';
static const bool _isProduction = false;
```

### ููุฃุฌูุฒุฉ ุงููุนููุฉ

ุฅุฐุง ููุช ุชุณุชุฎุฏู ุฌูุงุฒ ูุนูู (ููุณ Emulator)ุ ุชุญุชุงุฌ ูุชุนุฏูู ุงูู URL:

1. ุงูุชุญ `lib/config/api_config.dart`
2. ุงุณุชุจุฏู `localhost` ุจู IP ุฌูุงุฒู:

```dart
// ูุซุงู: ุฅุฐุง ูุงู IP ุฌูุงุฒู 192.168.1.100
static const String _devBaseUrl = 'http://192.168.1.100:3000/v1';
```

**ููููุฉ ูุนุฑูุฉ IP ุฌูุงุฒู:**
- Windows: ุงูุชุญ CMD ูุงูุชุจ `ipconfig` โ ุงุจุญุซ ุนู IPv4 Address
- Mac/Linux: ุงูุชุญ Terminal ูุงูุชุจ `ifconfig` ุฃู `ip addr`

### ููุฅูุชุงุฌ

ุนูุฏ ุงูุงูุชูุงู ููุฅูุชุงุฌ:

```dart
static const String _prodBaseUrl = 'https://your-domain.com/v1';
static const bool _isProduction = true;
```

## ๐ Endpoints ุงููุณุชุฎุฏูุฉ

### 1. ุชุณุฌูู ุงูุฏุฎูู
- **URL**: `POST /auth/login`
- **Request Body**:
  ```json
  {
    "email": "user@example.com",
    "password": "password123"
  }
  ```
- **Response** (200):
  ```json
  {
    "access_token": "eyJhbGci...",
    "user": {
      "id": "...",
      "email": "...",
      "name": "...",
      "phone": "...",
      "role": "PATIENT"
    }
  }
  ```

### 2. ุงูุชุณุฌูู
- **URL**: `POST /auth/register/patient`
- **Request Body**:
  ```json
  {
    "name": "ุฃุญูุฏ ูุญูุฏ",
    "email": "ahmed@example.com",
    "phone": "+966501234567",
    "password": "password123"
  }
  ```
- **Response** (201):
  ```json
  {
    "id": "...",
    "email": "ahmed@example.com",
    "name": "ุฃุญูุฏ ูุญูุฏ",
    "role": "PATIENT"
  }
  ```

## ๐๏ธ ุงููููุฒุงุช ุงููุถุงูุฉ

### 1. ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ุงููุญุณูุฉ
- ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ุจุงูุนุฑุจูุฉ
- ูุนุงูุฌุฉ ุฃุฎุทุงุก ุงูุดุจูุฉ
- ูุนุงูุฌุฉ timeout
- ูุนุงูุฌุฉ ุฃุฎุทุงุก ุงูู HTTP Status Codes

### 2. Logging ููุชุทููุฑ
ุนูุฏ ุชุดุบูู ุงูุชุทุจููุ ุณุชุธูุฑ ูู Console:
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
๐ง API Configuration
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
Base URL: http://10.0.2.2:3000/v1
Environment: Development
Platform: android
Timeout: 30s
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

๐ API Request: POST http://10.0.2.2:3000/v1/auth/login
๐ค Request Body: {"email":"...","password":"..."}
๐ฅ Response Status: 200
๐ฅ Response Body: {...}
```

### 3. Timeout Management
- ูููุฉ ุงูุชุฑุงุถูุฉ: 30 ุซุงููุฉ
- ุฑุณุงูุฉ ุฎุทุฃ ูุงุถุญุฉ ุนูุฏ ุงูุชูุงุก ุงููููุฉ

### 4. ุงูุชุญูู ูู ุงูุงุณุชุฌุงุจุฉ
- ุงูุชุญูู ูู ูุฌูุฏ ุงูุญููู ุงููุทููุจุฉ ูู ุงูุงุณุชุฌุงุจุฉ
- ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ุนูุฏ ุงุณุชุฌุงุจุฉ ุบูุฑ ุตุญูุญุฉ

## โ ุฎุทูุงุช ุงูุชุดุบูู

### 1. ุชุฃูุฏ ูู ุฃู ุงูุจุงู ุงูุฏ ูุนูู

```bash
# ูู ูุฌูุฏ ุงูุจุงู ุงูุฏ
cd new/clinic-api
npm run start:dev
```

ุชุฃูุฏ ูู ุฃู ุงูุจุงู ุงูุฏ ูุนูู ุนูู `http://localhost:3000`

### 2. ุดุบู ุงูุชุทุจูู

```bash
cd patien_app
flutter run
```

### 3. ุฌุฑุจ ุชุณุฌูู ุงูุฏุฎูู

ุงุณุชุฎุฏู ุจูุงูุงุช ุงูุงุฎุชุจุงุฑ:
- ุงูุจุฑูุฏ: `admin@clinic.com`
- ูููุฉ ุงููุฑูุฑ: `password123`

ุฃู ุณุฌู ุญุณุงุจ ุฌุฏูุฏ ูู ุดุงุดุฉ ุงูุชุณุฌูู.

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ูุดููุฉ: "ูุง ูููู ุงูุงุชุตุงู ุจุงูุฎุงุฏู"

**ุงูุญู:**
1. ุชุฃูุฏ ูู ุฃู ุงูุจุงู ุงูุฏ ูุนูู
2. ุชุญูู ูู ุงูู URL ูู `api_config.dart`
3. ููุชุทููุฑ ุนูู Android Emulatorุ ุชุฃูุฏ ูู ุงุณุชุฎุฏุงู `10.0.2.2`
4. ููุฃุฌูุฒุฉ ุงููุนููุฉุ ุงุณุชุฎุฏู IP ุฌูุงุฒู

### ูุดููุฉ: "ุงูุชูุช ูููุฉ ุงูุงุชุตุงู"

**ุงูุญู:**
1. ุชุญูู ูู ุงุชุตุงูู ุจุงูุฅูุชุฑูุช
2. ุชุฃูุฏ ูู ุฃู ุงูุจุงู ุงูุฏ ูุนูู ุจุดูู ุตุญูุญ
3. ููููู ุฒูุงุฏุฉ timeout ูู `api_config.dart`:
   ```dart
   static const int requestTimeout = 60; // 60 ุซุงููุฉ
   ```

### ูุดููุฉ: "ุงุณุชุฌุงุจุฉ ุบูุฑ ุตุญูุญุฉ ูู ุงูุฎุงุฏู"

**ุงูุญู:**
1. ุชุญูู ูู ุฃู ุงูุจุงู ุงูุฏ ูุนูุฏ ุงูุจูุงูุงุช ุจุงูุดูู ุงูุตุญูุญ
2. ุฑุงุฌุน Console logs ูุฑุคูุฉ ุงูุงุณุชุฌุงุจุฉ ุงููุนููุฉ
3. ุชุฃูุฏ ูู ุฃู ุงูู API endpoint ูุนูู ุจุดูู ุตุญูุญ

### ูุดููุฉ: "ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ุฃู ูููุฉ ุงููุฑูุฑ ุบูุฑ ุตุญูุญุฉ"

**ุงูุญู:**
1. ุชุฃูุฏ ูู ุงุณุชุฎุฏุงู ุจูุงูุงุช ุตุญูุญุฉ
2. ุฌุฑุจ ุฅูุดุงุก ุญุณุงุจ ุฌุฏูุฏ ูู ุดุงุดุฉ ุงูุชุณุฌูู
3. ุชุญูู ูู ุฃู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ุบูุฑ ูุณุชุฎุฏู ูุณุจูุงู

## ๐ ููุงุญุธุงุช ูููุฉ

1. **ุงูู Logging**: ูุชู ุทุจุงุนุฉ ุฌููุน ุงูุทูุจุงุช ูุงูุงุณุชุฌุงุจุงุช ูู Console ููุชุทููุฑ
2. **ุงูุฃูุงู**: ูู ุงูุฅูุชุงุฌุ ูุฌุจ ุฅุฒุงูุฉ ุงูู print statements ุฃู ุชุนุทูููุง
3. **ุงูู Headers**: ูุชู ุฅุถุงูุฉ `Content-Type` ู `Accept` ุชููุงุฆูุงู
4. **ุงูู Token**: ุจุนุฏ ุชุณุฌูู ุงูุฏุฎูู ุงููุงุฌุญุ ูุชู ุญูุธ Token ูุญููุงู ุชููุงุฆูุงู

## ๐ฏ ุงูุฎุทูุงุช ุงูุชุงููุฉ

1. โ ุชุณุฌูู ุงูุฏุฎูู - ูุนูู
2. โ ุงูุชุณุฌูู - ูุนูู
3. โณ ุฅุถุงูุฉ Token ูู Header ููุทูุจุงุช ุงููุญููุฉ
4. โณ ุฅุถุงูุฉ Refresh Token
5. โณ ุฅุถุงูุฉ Logout

---

**ุขุฎุฑ ุชุญุฏูุซ**: 2024  
**ุงูุญุงูุฉ**: โ ุฌุงูุฒ ููุงุณุชุฎุฏุงู

